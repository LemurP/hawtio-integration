<h1>Bundles</h1>

<div class="controller-section" ng-controller="Osgi.BundleListController">

  <div class="row toolbar-pf">
    <form class="toolbar-pf-actions">
      <div class="form-group">
        <label>Show bundles</label>
        <div class="btn-group">
          <button type="button" class="btn btn-default" ng-class="{active: display.showActiveMQBundles}"
                  ng-click="display.showActiveMQBundles = !display.showActiveMQBundles">
            ActiveMQ
          </button>
          <button type="button" class="btn btn-default" ng-class="{active: display.showCamelBundles}"
                  ng-click="display.showCamelBundles = !display.showCamelBundles">
            Camel
          </button>
          <button type="button" class="btn btn-default" ng-class="{active: display.showCxfBundles}"
                  ng-click="display.showCxfBundles = !display.showCxfBundles">
            CXF
          </button>
          <button type="button" class="btn btn-default" ng-class="{active: display.showPlatformBundles}"
                  ng-click="display.showPlatformBundles = !display.showPlatformBundles">
            Platform
          </button>
          <button type="button" class="btn btn-default" ng-class="{active: display.showAllBundles}"
                  ng-click="display.showAllBundles = !display.showAllBundles">
            All
          </button>
        </div>            
      </div>
      <div class="form-group">
        <input type="text" class="form-control" ng-model="display.bundleFilter" placeholder="Filter..." autocomplete="off">
      </div>
      <div class="toolbar-pf-action-right">
        <div class="form-group toolbar-pf-view-selector">
          <a ng-href="{{listViewUrl}}" class="btn btn-link" title="Grid view">
            <i class="fa fa-th"></i>
          </a>
          <a ng-href="{{tableViewUrl}}" class="btn btn-link" title="Table view">
            <i class="fa fa-table"></i>
          </a>
        </div>
      </div>
    </form>
  </div>
  
  <div id="toolbar-row-2" class="row toolbar-pf">
    <form class="toolbar-pf-actions form-inline">
      <div class="form-group">
        <label for="sortField">Sort by</label>
        <select id="sortField" class="form-control" ng-model="display.sortField">
          <option value="Identifier">ID</option>
          <option value="Name">Name</option>
          <option value="SymbolicName">Symbolic Name</option>
        </select>
      </div>
      <div class="form-group">
        <label for="bundleField">Display</label>
        <select id="bundleField" class="form-control" ng-model="display.bundleField">
          <option value="Name">Name</option>
          <option value="SymbolicName">Symbolic Name</option>
        </select>
      </div>
      <div class="form-group">
        <label for="startLevelFilter">Start Level</label>
        <input id="startLevelFilter" type="number" min="0" class="form-control" ng-model="display.startLevelFilter">
      </div>
    </form>
  </div>

  <br><br><br><br><br>

  <div class="row bundle-list-toolbar">

    <div class="pull-left">
      <div class="input-group" hawtio-show object-name="{{frameworkMBean}}" method-name="installBundle">
        <input class="input-xxlarge"
               type="text"
               placeholder="Install Bundle..."
               ng-model="bundleUrl">
        <button ng-disabled="installDisabled()"
                class="btn btn-default"
                ng-click="install()"
                title="Install">
          <i class="fa fa-check"></i>
        </button>
      </div>

    </div>

  </div>

  <div class="row" id="bundleTableHolder">
    <!-- Just create a bit of space between the form and the controls -->
    <p></p>

    <script type="text/ng-template" id="popoverTemplate">
<small>
  <table class="table">
    <tbody>
    <tr ng-repeat="(k, v) in bundle track by $index">
      <td class="property-name">{{k}}</td>
      <td class="property-value">{{v}}</td>
    </tr>
    </tbody>
  </table>
</small>
    </script>

    <div class="bundle-list centered"
         hawtio-auto-columns=".bundle-item">
      <div ng-repeat="bundle in bundles"
           class="bundle-item"
           ng-show="filterBundle(bundle)"
           hawtio-template-popover title="Bundle details">
        <a id="{{bundle.Identifier}}" ng-href="{{bundle.Url}}">
          <span class="badge" ng-class="getStateStyle(bundle.State)">{{getLabel(bundle)}}</span>
        </a>
      </div>
    </div>
  </div>
</div>
