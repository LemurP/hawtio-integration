<h1>{{row.Headers['Bundle-Name'].Value}}</h1>

<div class="breadcrumb">
  <a href="#" onclick="window.history.back()"><span class="fa fa-angle-left"></span> Bundles</a>
</div>

<div class="row toolbar-pf">
  <div class="col-sm-12">
    <form class="toolbar-pf-actions">
      <div class="form-group">
        <div class="btn-group">
          <button ng-click="stopBundle(bundleId)" 
                  class="btn btn-default" 
                  hawtio-show
                  object-name="{{frameworkMBean}}"
                  method-name="stopBundle"
                  title="stop"><i class="fa fa-power-off"/> Stop</button>
          <button ng-click="startBundle(bundleId)" 
                  class="btn btn-default" 
                  hawtio-show
                  object-name="{{frameworkMBean}}"
                  method-name="startBundle"
                  title="start"><i class="fa fa-play-circle"/> Start</button>
          <button ng-click="refreshBundle(bundleId)" 
                  class="btn btn-default" 
                  hawtio-show
                  object-name="{{frameworkMBean}}"
                  method-name="refreshBundle"
                  title="refresh"><i class="fa fa-refresh"/> Refresh</button>
          <button ng-click="updateBundle(bundleId)" 
                  class="btn btn-default" 
                  hawtio-show
                  object-name="{{frameworkMBean}}"
                  method-name="updateBundle"
                  title="update"><i class="fa fa-cloud-download"/> Update</button>
          <button ng-click="uninstallBundle(bundleId)" 
                  class="btn btn-default" 
                  hawtio-show
                  object-name="{{frameworkMBean}}"
                  method-name="uninstallBundle"
                  title="uninstall"><i class="fa fa-eject"/> Uninstall</button>
        </div>
      </div>
    </form>
  </div>
</div>

<h2>Details</h2>

<div class="row">
  <div class="col-md-12">
    <dl class="bundle-details">
      <dt ng-switch="row.Fragment">
        <span ng-switch-when="true">Fragment&nbsp;ID</span>
        <span ng-switch-default>Bundle&nbsp;ID</span>
      </dt>
      <dd>
        {{row.Identifier}}
      </dd>
      <dt>
        Bundle&nbsp;Name
      </dt>
      <dd>
        {{row.Headers['Bundle-Name'].Value}}
      </dd>
      <dt>
        Symbolic&nbsp;Name
      </dt>
      <dd>
        <span class="label label-default">{{row.SymbolicName}}</span>
      </dd>
      <dt>
        Version
      </dt>
      <dd>
        {{row.Version}}
      </dd>
      <dt>
        Start&nbsp;Level
      </dt>
      <dd>
        {{row.StartLevel}}
      </dd>
      <dt>
        Location
      </dt>
      <dd>
        {{row.Location}}
      </dd>
      <dt>
        State
      </dt>
      <dd>
        <span class="label" ng-class="row.StateStyle">{{row.State}}</span>
      </dd>
      <dt>
        Last&nbsp;Modified
      </dt>
      <dd>
        {{row.LastModified | date:'medium'}}
      </dd>
      <div>
      <dt ng-switch="row.Fragment">
        <span ng-switch-when="true">Hosts</span>
        <span ng-switch-default>Fragments</span>
      </dt>
      <dd ng-switch="row.Fragment">
        <span ng-switch-when="true" ng-bind-html-unsafe="row.Hosts"/>
        <span ng-switch-default ng-bind-html-unsafe="row.Fragments"/>
      </dd>
    </dl>
  </div>
</div>

<h2>Inspect Classloading</h2>

<div class="row" ng-if="classLoadingAlert">
  <div class="col-md-12">
    <div class="alert alert-dismissable" ng-class="'alert-' + classLoadingAlert.type">
      <span class="pficon" ng-class="classLoadingAlert.icon"></span>
      <button type="button" class="close" aria-hidden="true" ng-click="dismissClassLoadingAlert()">
        <span class="pficon pficon-close"></span>
      </button>
      <span ng-bind-html="classLoadingAlert.message"></span>
    </div>
  </div>
</div>

<div class="row">
  <div class="col-md-12">
    <form class="form-inline inspect-classloading">
      <div class="form-group">
        <label class="control-label" for="exampleInput">Class Name</label>
        <input type="text" class="form-control" ng-model="classToLoad">
        <button class="btn btn-default" ng-click="executeLoadClass(classToLoad)" ng-disabled="!classToLoad">
          Load Class
        </button>
      </div>
    </form>
  </div>
</div>

<div class="row inspect-classloading">
  <div class="col-md-12">
    <form class="form-inline">
      <div class="form-group">
        <label class="control-label" for="exampleInput">Resource Name</label>
        <input type="text" class="form-control" ng-model="resourceToLoad">
        <button class="btn btn-default" ng-click="executeFindResource(resourceToLoad)" ng-disabled="!resourceToLoad">
          Get Resource
        </button>
      </div>
    </form>
  </div>
</div>

<h2>Imported Packages</h2>

<div class="row">
  <div class="col-md-12">
    <ul class="list-group labels">
      <li class="list-group-item" ng-repeat="package in row.ImportPackages">
        <span id="import.{{package}}" class="label label-info">{{package}}</span>
      </li>
    </ul>
  </div>
</div>

<div class="row">
  <div class="col-md-12">
    <div id="unsatisfiedOptionalImports"/>
  </div>
</div>

<h2>Exported Packages</h2>

<div class="row">
  <div class="col-md-12">
    <ul class="list-group labels">
      <li class="list-group-item" ng-repeat="(package, data) in row.ExportData">
        <span id="export.{{package}}" class="label label-success">{{package}}</span>
      </li>
    </ul>
  </div>
</div>

<br><br><br>

  <table>
    <tr>
      <td>
      </td>
      <td>
        <div class="accordion" id="accordionExportedPackages">
          <div class="accordion-group">
            <div class="accordion-heading">
              <a class="accordion-toggle" data-toggle="collapse" data-parent="#accordionExportedPackages"
                 href="collapseExportedPackages">
                Exported Packages
              </a>
            </div>
            <div id="collapseExportedPackages" class="accordion-body collapse in">
              <table>
                <tr ng-repeat="(package, data) in row.ExportData">
                  <td>
                    <div class="less-big badge badge-success" id="export.{{package}}">{{package}}</div>
                  </td>
                </tr>
              </table>
            </div>
          </div>
        </div>
      </td>
    </tr>
    <tr>
      <td></td>
      <td>
        <div class="accordion" id="accordionServices">
          <div class="accordion-group">
            <div class="accordion-heading">
              <a class="accordion-toggle" data-toggle="collapse" data-parent="#accordionServices"
                 href="collapseServices">
                Services
              </a>
            </div>
            <div id="collapseServices" class="accordion-body collapse in">
              Registered Services
              <table>
                <tr ng-repeat="id in row.RegisteredServices">
                  <td><i class="fa fa-cog less-big text-success" id="registers.service.{{id}}">{{id}}</i></td>
                </tr>
              </table>
              <br/>
              Services used by this Bundle
              <table>
                <tr ng-repeat="id in row.ServicesInUse">
                  <td><i class="fa fa-cog less-big text-info" id="uses.service.{{id}}">{{id}}</i></td>
                </tr>
              </table>
            </div>
          </div>
        </div>
      </td>
    </tr>
    <tr>
      <td>
      </td>
      <td>
        <div class="accordion" id="accordionRequiringBundles">
          <div class="accordion-group">
            <div class="accordion-heading">
              <a class="accordion-toggle" data-toggle="collapse" data-parent="#accordionRequiringBundles"
                 href="collapseRequiringBundles">
                Other Bundles using this Bundle
              </a>
            </div>
            <div id="collapseRequiringBundles" class="accordion-body collapse in">
              <div class="accordion-inner">
                <span ng-bind-html-unsafe="row.RequiringBundles"/>
              </div>
            </div>
          </div>
        </div>
      </td>
    </tr>
    <tr>
      <td>
      </td>
      <td>
        <div class="accordion" id="accordionHeaders">
          <div class="accordion-group">
            <div class="accordion-heading">
              <a class="accordion-toggle" data-toggle="collapse" data-parent="#accordionHeaders"
                 href="collapsHeaders">
                Headers
              </a>
            </div>
            <div id="collapsHeaders" class="accordion-body collapse in">
              <table class="accordion-inner">
                <tr ng-repeat="(key, value) in row.Headers" ng-show="showValue(key)">
                  <td valign="top">{{key}}</td>
                  <td>{{value.Value}}</td>
                </tr>
              </table>
            </div>
          </div>
        </div>
      </td>
    </tr>
  </table>
</div>
