<div id="camel-debug" ng-controller="Camel.DebugRouteController">
  
  <h1>Debug</h1>
  
  <div ng-hide="debugging">
    <p>Debugging allows you to step through camel routes to diagnose issues.</p>
    <button type="button" class="btn btn-primary" ng-click="startDebugging()">Start debugging</button>
  </div>
  
  <div ng-if="debugging">
    <div class="toolbar-pf debug-toolbar">
      <form class="toolbar-pf-actions">
        <div class="form-group">
          <div ng-switch="hasBreakpoint">
            <button type="button" ng-switch-when="true" class="btn btn-default" ng-disabled="!selectedDiagramNodeId"
                    ng-click="removeBreakpoint()" title="Remove the breakpoint on the selected node">
              Remove breakpoint
            </button>
            <button type="button" ng-switch-default="false" class="btn btn-default" ng-disabled="!selectedDiagramNodeId"
                    ng-click="addBreakpoint()" title="Add a breakpoint on the selected node">
              Add breakpoint
            </button>
          </div>
        </div>
        <div class="form-group debug-icon-buttons">
          <button type="button" class="btn btn-default" ng-click="step()" ng-disabled="!stopped"
                  title="Step into the next node">
            <i class="fa fa-arrow-down" aria-hidden="true"></i>
          </button>
          <button type="button" class="btn btn-default" ng-click="resume()" ng-disabled="!stopped"
                  title="Resume running">
            <i class="fa fa-play" aria-hidden="true"></i>
          </button>
          <button type="button" class="btn btn-default" ng-click="suspend()" ng-disabled="stopped"
                  title="Suspend all threads in this route">
            <i class="fa fa-pause" aria-hidden="true"></i>
          </button>
        </div>
        <div class="form-group">
          <button type="button" class="btn btn-default" ng-click="stopDebugging()">Stop debugging</button>
        </div>
      </form>
    </div>
  
    <div class="breakpoint-list" ng-if="breakpoints.length > 0">
      <label>Breakpoints</label>
      <ul>
        <li ng-repeat="b in breakpoints">
          {{b}}
        </li>
      </ul>
    </div>
    
    <div class="text-center" ng-include src="graphView"></div>

    <!-- slider to always show the current debugged message -->
    <div hawtio-slideout="stopped" title="Breakpoint suspended at {{row.toNode}}" close="false" top="60%" height="40%">
      <div class="dialog-body">
        <h2>{{row.id}}</h2>
        <h3>Headers</h3>
        <table class="table table-striped table-bordered">
          <thead>
            <tr>
              <th>Name</th>
              <th>Type</th>
              <th>Value</th>
            </tr>
          </thead>
          <tbody compile="row.headerHtml"></tbody>
        </table>
        <h3>Body</h3>
        <p><label>Type:</label> <span ng-bind="row.bodyType"></span></p>
        <div hawtio-editor="row.body" read-only="true" mode="mode"></div>
      </div>
    </div>
  </div>

</div>